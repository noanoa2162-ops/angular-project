<div class="settings-page">
  <div class="settings-container">
    <!-- Header -->
    <div class="page-header">
      <button class="btn-back" (click)="goBack()">
        <svg viewBox="0 0 24 24" fill="none">
          <path d="M19 12H5M12 19l-7-7 7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      <h1>Settings</h1>
    </div>

    <!-- Success Message -->
    @if (saveSuccess()) {
      <div class="success-banner">
        <svg viewBox="0 0 24 24" fill="none">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" stroke="currentColor" stroke-width="2"/>
          <path d="M22 4 12 14.01l-3-3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>Settings saved successfully!</span>
      </div>
    }

    <!-- Settings Cards -->
    <div class="settings-content">
      <!-- Notifications -->
      <div class="settings-card">
        <div class="card-header">
          <div class="card-icon notifications">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" stroke="currentColor" stroke-width="2"/>
              <path d="M13.73 21a2 2 0 0 1-3.46 0" stroke="currentColor" stroke-width="2"/>
            </svg>
          </div>
          <div class="card-info">
            <h3>Notifications</h3>
            <p>Manage your notification preferences</p>
          </div>
        </div>
        <div class="card-body">
          <div class="setting-item">
            <div class="setting-info">
              <span class="setting-title">Email Notifications</span>
              <span class="setting-desc">Receive email updates about your tasks</span>
            </div>
            <label class="toggle">
              <input type="checkbox" [(ngModel)]="emailNotifications">
              <span class="slider"></span>
            </label>
          </div>
          <div class="setting-item">
            <div class="setting-info">
              <span class="setting-title">Push Notifications</span>
              <span class="setting-desc">Receive push notifications in browser</span>
            </div>
            <label class="toggle">
              <input type="checkbox" [(ngModel)]="pushNotifications">
              <span class="slider"></span>
            </label>
          </div>
          <div class="setting-item">
            <div class="setting-info">
              <span class="setting-title">Task Reminders</span>
              <span class="setting-desc">Get reminded about upcoming deadlines</span>
            </div>
            <label class="toggle">
              <input type="checkbox" [(ngModel)]="taskReminders">
              <span class="slider"></span>
            </label>
          </div>
        </div>
      </div>

      <!-- Appearance -->
      <div class="settings-card">
        <div class="card-header">
          <div class="card-icon appearance">
            <svg viewBox="0 0 24 24" fill="none">
              <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2"/>
              <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2"/>
            </svg>
          </div>
          <div class="card-info">
            <h3>Appearance</h3>
            <p>Customize how LUMINA looks</p>
          </div>
        </div>
        <div class="card-body">
          <div class="theme-selector">
            <span class="setting-title">Theme</span>
            <div class="theme-options">
              <button class="theme-option" [class.active]="theme === 'light'" (click)="theme = 'light'">
                <svg viewBox="0 0 24 24" fill="none">
                  <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2"/>
                  <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2" stroke="currentColor" stroke-width="2"/>
                </svg>
                <span>Light</span>
              </button>
              <button class="theme-option" [class.active]="theme === 'dark'" (click)="theme = 'dark'">
                <svg viewBox="0 0 24 24" fill="none">
                  <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2"/>
                </svg>
                <span>Dark</span>
              </button>
              <button class="theme-option" [class.active]="theme === 'system'" (click)="theme = 'system'">
                <svg viewBox="0 0 24 24" fill="none">
                  <rect x="2" y="3" width="20" height="14" rx="2" ry="2" stroke="currentColor" stroke-width="2"/>
                  <path d="M8 21h8M12 17v4" stroke="currentColor" stroke-width="2"/>
                </svg>
                <span>System</span>
              </button>
            </div>
          </div>
          <div class="setting-item">
            <div class="setting-info">
              <span class="setting-title">Compact Mode</span>
              <span class="setting-desc">Show more content with smaller spacing</span>
            </div>
            <label class="toggle">
              <input type="checkbox" [(ngModel)]="compactMode">
              <span class="slider"></span>
            </label>
          </div>
        </div>
      </div>

      <!-- Privacy & Security -->
      <div class="settings-card">
        <div class="card-header">
          <div class="card-icon security">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" stroke="currentColor" stroke-width="2"/>
            </svg>
          </div>
          <div class="card-info">
            <h3>Privacy & Security</h3>
            <p>Manage your privacy settings</p>
          </div>
        </div>
        <div class="card-body">
          <div class="setting-item">
            <div class="setting-info">
              <span class="setting-title">Two-Factor Authentication</span>
              <span class="setting-desc">Add an extra layer of security</span>
            </div>
            <label class="toggle">
              <input type="checkbox" [(ngModel)]="twoFactorAuth">
              <span class="slider"></span>
            </label>
          </div>
          <div class="setting-item">
            <div class="setting-info">
              <span class="setting-title">Activity Status</span>
              <span class="setting-desc">Let others see when you're online</span>
            </div>
            <label class="toggle">
              <input type="checkbox" [(ngModel)]="activityStatus">
              <span class="slider"></span>
            </label>
          </div>
        </div>
      </div>

      <!-- Danger Zone -->
      <div class="settings-card danger">
        <div class="card-header">
          <div class="card-icon danger">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" stroke="currentColor" stroke-width="2"/>
              <path d="M12 9v4M12 17h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <div class="card-info">
            <h3>Danger Zone</h3>
            <p>Irreversible actions</p>
          </div>
        </div>
        <div class="card-body">
          <div class="danger-actions">
            <button class="btn-danger-outline" (click)="exportData()">
              <svg viewBox="0 0 24 24" fill="none">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" stroke="currentColor" stroke-width="2"/>
                <polyline points="7,10 12,15 17,10" stroke="currentColor" stroke-width="2"/>
                <line x1="12" y1="15" x2="12" y2="3" stroke="currentColor" stroke-width="2"/>
              </svg>
              Export My Data
            </button>
            <button class="btn-danger" (click)="deleteAccount()">
              <svg viewBox="0 0 24 24" fill="none">
                <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" stroke="currentColor" stroke-width="2"/>
              </svg>
              Delete Account
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Save Button -->
    <div class="settings-footer">
      <button class="btn-save" (click)="saveSettings()" [disabled]="isSaving()">
        @if (isSaving()) {
          <div class="spinner"></div>
          Saving...
        } @else {
          <svg viewBox="0 0 24 24" fill="none">
            <path d="M20 6L9 17l-5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Save Settings
        }
      </button>
    </div>
  </div>
</div>
